(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{191:function(e,t,n){},210:function(e,t,n){},535:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){},543:function(e,t,n){"use strict";n.r(t);var c=n(0),l=n.n(c),i=n(26),a=n.n(i),s=(n(191),n(7)),o=n(11),r=n(16),d=n(17),u=n(28),j=n.n(u),b=(n(210),n(63)),h=n(34),O=n(10),f=n(5),v=(n(535),n(3)),m=function(){var e=Object(O.f)(),t=(Object(c.useContext)(X),function(t){console.log("---path----",t),e(t)});return Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("div",{className:"title",children:"\u529f\u80fd\u5217\u8868"}),Object(v.jsx)(f.a,{className:"button",block:!0,color:"primary",onClick:function(){t("/apply")},children:"\u53d1\u8d77\u62a5\u9500"}),Object(v.jsx)(f.a,{className:"button",block:!0,color:"primary",onClick:function(){t("/bill")},children:"\u5355\u636e\u8be6\u60c5"}),Object(v.jsx)(f.a,{className:"button",block:!0,color:"primary",onClick:function(){t("/todoList")},children:"\u5f85\u529e\u5217\u8868"})]})},x=n(22),p=n(4);n(537);function g(e,t){return Math.random()*(t-e+1)+e|0}var N=[["\u7533\u8bf7\u5355","\u62a5\u9500\u5355","\u501f\u6b3e\u5355"]],y=[["\u5ba1\u6279\u6d41A","\u5ba1\u6279\u6d41B","\u5ba1\u6279\u6d41C","\u5ba1\u6279\u6d41D","\u5ba1\u6279\u6d41E"]],k=["\u5f20\u4e09","\u674e\u56db","\u738b\u4e94","\u8d75\u516d"],I=["\u7533\u8bf7\u53bb\u5317\u4eac\u7684\u51fa\u5dee\u62a5\u9500","\u62a5\u9500 4 \u6708\u4efd\u7684\u529e\u516c\u5ba4\u8d39\u7528","6 \u6708\u4efd\u56e2\u5efa\u8d39\u7528\u62a5\u9500"],S=[12,23,200,400,666],C=function(){var e=Object(O.f)(),t=f.c.useForm(),n=Object(p.a)(t,1)[0],l=Object(c.useState)(!1),i=Object(p.a)(l,2),a=i[0],s=i[1],o=Object(c.useState)(N),r=Object(p.a)(o,2),d=r[0],u=r[1],j=Object(c.useState)("flow"),b=Object(p.a)(j,2),h=b[0],m=b[1],C=Object(c.useState)(N[0][g(0,N[0].length-1)]),q=Object(p.a)(C,2),w=q[0],J=q[1],F=Object(c.useState)(y[0][g(0,y[0].length-1)]),R=Object(p.a)(F,2),z=R[0],A=R[1],B=function(e){"\u6253\u5370"===e?setTimeout((function(){f.b.alert({content:"\u6253\u5370\u5b8c\u6210"})}),500):f.b.confirm({title:"\u8bc4\u8bba",content:Object(v.jsx)(f.h,{placeholder:"\u8bf7\u8f93\u5165\u8bc4\u8bba"}),onConfirm:function(){setTimeout((function(){f.i.show({icon:"success",content:"\u8bc4\u8bba\u6210\u529f"})}),1e3)}})};return Object(c.useEffect)((function(){n.setFieldsValue({flow:"\u7533\u8bf7\u5355",approve:"ww",person:k[g(0,k.length-1)],applyReason:I[g(0,I.length-1)],applyMoney:S[g(0,S.length-1)]})}),[]),Object(v.jsxs)("div",{className:"bill",children:[Object(v.jsx)("div",{className:"header",children:Object(v.jsx)(f.e,{onBack:function(){e("/",{replace:!0})},children:w})}),Object(v.jsxs)("div",{className:"form",children:[Object(v.jsxs)(f.c,{form:n,footer:Object(v.jsxs)("div",{className:"btns",children:[Object(v.jsx)(f.a,{block:!0,type:"submit",color:"primary",onClick:function(){return B("\u8bc4\u8bba")},children:"\u8bc4\u8bba"}),Object(v.jsx)(f.a,{block:!0,type:"submit",color:"primary",style:{marginLeft:"20px"},onClick:function(){return B("\u6253\u5370")},children:"\u6253\u5370"})]}),children:[Object(v.jsx)(f.c.Item,{name:"flow",label:"\u5355\u636e\u6a21\u677f",layout:"horizontal",children:Object(v.jsx)("div",{onClick:function(){u(N),m("flow")},children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u5355\u636e\u6a21\u677f",value:w,disabled:!0})})}),Object(v.jsx)(f.c.Item,{name:"approve",label:"\u5ba1\u6279\u6d41",children:Object(v.jsx)("div",{onClick:function(){u(y),m("approve")},children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6279\u6d41",value:z,disabled:!0})})}),Object(v.jsx)(f.c.Item,{name:"person",label:"".concat((null===w||void 0===w?void 0:w.substring(0,(null===w||void 0===w?void 0:w.length)-1))||"\u62a5\u9500","\u4eba"),children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u9500\u4eba",disabled:!0})}),Object(v.jsx)(f.c.Item,{name:"applyReason",label:"".concat((null===w||void 0===w?void 0:w.substring(0,(null===w||void 0===w?void 0:w.length)-1))||"\u62a5\u9500","\u4e8b\u7531"),children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u9500\u4e8b\u7531",disabled:!0})}),Object(v.jsx)(f.c.Item,{name:"applyMoney",label:"".concat((null===w||void 0===w?void 0:w.substring(0,(null===w||void 0===w?void 0:w.length)-1))||"\u62a5\u9500","\u91d1\u989d"),children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u9500\u91d1\u989d",type:"number",disabled:!0})})]}),Object(v.jsx)(f.f,{columns:d,visible:a,onClose:function(){s(!1)},value:w,onConfirm:function(e){"flow"===h?J(e[0]):A(e[0]),n.setFieldsValue(Object(x.a)({},h,e[0]))}})]})]})},q=n(13),w=n.n(q),J=n(27),F=(n(538),[["\u7533\u8bf7\u5355","\u62a5\u9500\u5355","\u501f\u6b3e\u5355"]]),R=[["\u5f20\u4e09","\u674e\u56db","\u738b\u4e94","\u8d75\u516d"]],z=function(){var e=Object(c.useContext)(X);console.log("-----",e);var t=Object(O.f)(),n=f.c.useForm(),l=Object(p.a)(n,1)[0],i=Object(c.useState)(!1),a=Object(p.a)(i,2),s=a[0],o=a[1],r=Object(c.useState)(!1),d=Object(p.a)(r,2),u=d[0],b=d[1],h=Object(c.useState)("\u7533\u8bf7\u5355"),m=Object(p.a)(h,2),g=m[0],N=m[1],y=Object(c.useState)("flow"),k=Object(p.a)(y,2),I=k[0],S=k[1],C=Object(c.useState)(F),q=Object(p.a)(C,2),z=q[0],A=q[1],B=Object(c.useState)(""),M=Object(p.a)(B,2),T=M[0],D=M[1],E=function(){t("/",{replace:!0})},L=function(){var t=Object(J.a)(w.a.mark((function t(){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.validateFields();case 3:n=t.sent,console.log(n),b(!0),j.a.post(e.domain+"/biz/createTask",{userId:e.userId,userName:e.userName,url:"/#/bill"}).then((function(e){b(!1),e&&e.data.success?f.b.alert({content:"\u63d0\u4ea4\u5355\u636e\u6210\u529f!",onConfirm:function(){E()}}):alert("request failed ---\x3e"+JSON.stringify(e))})).catch((function(e){b(!1),alert("httpRequest failed ---\x3e"+JSON.stringify(e))})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){l.setFieldsValue({flow:"\u7533\u8bf7\u5355"})}),[]),Object(v.jsxs)("div",{className:"apply",children:[Object(v.jsx)("div",{className:"header",children:Object(v.jsx)(f.e,{onBack:E,children:g})}),Object(v.jsxs)("div",{className:"form",children:[Object(v.jsxs)(f.c,{form:l,footer:Object(v.jsx)("div",{className:"btns",children:Object(v.jsx)(f.a,{block:!0,type:"submit",color:"primary",onClick:L,loading:u,children:"\u63d0\u4ea4\u9001\u5ba1"})}),children:[Object(v.jsx)(f.c.Item,{name:"flow",label:"\u5355\u636e\u6a21\u677f",layout:"horizontal",rules:[{required:!0,message:"\u5355\u636e\u6a21\u677f\u4e3a\u7a7a"}],children:Object(v.jsx)("div",{onClick:function(){A(F),S("flow"),!s&&o(!0)},children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u5355\u636e\u6a21\u677f",value:g,disabled:!0})})}),Object(v.jsx)(f.c.Item,{name:"billName",label:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u5355\u540d\u5b57"),rules:[{required:!0,message:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u5355\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a")}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u5355\u540d\u5b57")})}),Object(v.jsx)(f.c.Item,{name:"person",label:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4eba"),rules:[{required:!0,message:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4eba\u4e0d\u80fd\u4e3a\u7a7a")}],children:Object(v.jsx)("div",{onClick:function(){A(R),S("person"),!s&&o(!0)},children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u62e9".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4eba"),value:T,disabled:!0})})}),Object(v.jsx)(f.c.Item,{name:"applyReason",label:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4e8b\u7531"),rules:[{required:!0,message:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4e8b\u7531\u4e0d\u80fd\u4e3a\u7a7a")}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u4e8b\u7531")})}),Object(v.jsx)(f.c.Item,{name:"applyMoney",label:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u91d1\u989d"),rules:[{required:!0,message:"".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a")}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165".concat((null===g||void 0===g?void 0:g.substring(0,(null===g||void 0===g?void 0:g.length)-1))||"\u62a5\u9500","\u91d1\u989d")})})]}),Object(v.jsx)(f.f,{columns:z,visible:s,onClose:function(){o(!1)},value:g,onConfirm:function(e){"flow"===I?N(e[0]):D(e[0]),l.setFieldsValue(Object(x.a)({},I,e[0]))}})]})]})},A=(n(539),function(){return Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)("div",{className:"title",children:"\u53d1\u8d77\u62a5\u9500"}),Object(v.jsx)(f.a,{className:"button",block:!0,color:"primary",onClick:function(e){},children:"\u5f85\u529e\u5ba1\u6279"})]})}),B=(n(540),n(541),function(e){var t=e.id,n=e.title,c=e.submiter,l=e.reason,i=e.type,a=Object(O.f)();return Object(v.jsxs)("div",{className:"todo-card",children:[Object(v.jsx)("div",{className:"todo-title",children:n}),Object(v.jsxs)("div",{className:"user",children:["\u63d0\u4ea4\u4eba\uff1a",c]}),Object(v.jsxs)("div",{className:"reason",children:[i,"\u4e8b\u7531\uff1a",l]}),Object(v.jsx)("div",{className:"btn-wrap",children:Object(v.jsx)(f.a,{onClick:function(){a("/todoDetail/".concat(t))},size:"small",color:"primary",children:"\u67e5\u770b\u8be6\u60c5"})})]})});function M(e,t){return Math.random()*(t-e+1)+e|0}var T=[["\u7533\u8bf7\u5355","\u62a5\u9500\u5355","\u501f\u6b3e\u5355"]],D=["\u5f20\u4e09","\u674e\u56db","\u738b\u4e94","\u8d75\u516d"],E=["\u7533\u8bf7\u53bb\u5317\u4eac\u7684\u51fa\u5dee\u62a5\u9500","\u62a5\u9500 4 \u6708\u4efd\u7684\u529e\u516c\u5ba4\u8d39\u7528","6 \u6708\u4efd\u56e2\u5efa\u8d39\u7528\u62a5\u9500"],L=function(){var e=Object(O.f)(),t=Object(c.useContext)(X),n=Object(c.useState)([]),l=Object(p.a)(n,2),i=l[0],a=l[1],s=Object(c.useState)([]),o=Object(p.a)(s,2),r=o[0],d=o[1],u=Object(c.useState)(0),b=Object(p.a)(u,2),h=b[0],m=b[1],x=Object(c.useState)(0),g=Object(p.a)(x,2),N=g[0],y=g[1];return Object(c.useEffect)((function(){j.a.post(t.domain+"/biz/query/tasks",{userId:t.userId,userName:t.userName,taskStatus:0}).then((function(e){var t;if(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.success){var n,c,l=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)||{},i=(null===l||void 0===l||null===(c=l.result)||void 0===c?void 0:c.list)||[];d(i),y(i.length)}else alert("request failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("httpRequest failed ---\x3e"+JSON.stringify(e))})),j.a.post(t.domain+"/biz/query/tasks",{userId:t.userId,userName:t.userName,taskStatus:1}).then((function(e){var t;if(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.success){var n,c,l=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)||{},i=(null===l||void 0===l||null===(c=l.result)||void 0===c?void 0:c.list)||[];a(i),m(i.length)}else alert("request failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))}),[t]),Object(v.jsxs)("div",{className:"todo-list",children:[Object(v.jsx)(f.e,{onBack:function(){e("/",{replace:!0})},children:"\u67e5\u770b\u5f85\u529e"}),Object(v.jsx)("div",{className:"nav-title"}),Object(v.jsxs)(f.g,{children:[Object(v.jsx)(f.g.Tab,{title:"\u672a\u5904\u7406 "+h,children:null===i||void 0===i?void 0:i.map((function(e){return Object(v.jsx)(B,{id:e.instanceId,type:T[0][M(0,T[0].length-1)],title:e.title,reason:E[M(0,E.length-1)],submiter:D[M(0,D.length-1)]},e.instanceId)}))},"\u672a\u5904\u7406"),Object(v.jsx)(f.g.Tab,{title:"\u5df2\u5904\u7406 "+N,children:null===r||void 0===r?void 0:r.map((function(e){return Object(v.jsx)(B,{id:e.instanceId,type:T[0][M(0,T[0].length-1)],title:e.title,reason:E[M(0,E.length-1)],submiter:D[M(0,D.length-1)]},e.instanceId)}))},"\u5df2\u5904\u7406")]})]})};n(542);function V(e,t){return Math.random()*(t-e+1)+e|0}var P=[["\u7533\u8bf7\u5355","\u62a5\u9500\u5355","\u501f\u6b3e\u5355"]],G=[["\u5ba1\u6279\u6d41A","\u5ba1\u6279\u6d41B","\u5ba1\u6279\u6d41C","\u5ba1\u6279\u6d41D","\u5ba1\u6279\u6d41E"]],H=["\u5f20\u4e09","\u674e\u56db","\u738b\u4e94","\u8d75\u516d"],K=["\u7533\u8bf7\u53bb\u5317\u4eac\u7684\u51fa\u5dee\u62a5\u9500","\u62a5\u9500 4 \u6708\u4efd\u7684\u529e\u516c\u5ba4\u8d39\u7528","6 \u6708\u4efd\u56e2\u5efa\u8d39\u7528\u62a5\u9500"],Q=[12,23,200,400,666],U=function(e){var t=Object(O.f)(),n=Object(c.useContext)(X),l=f.c.useForm(),i=Object(p.a)(l,1)[0],a=Object(O.g)(),s=Object(c.useState)(!1),o=Object(p.a)(s,2),r=o[0],d=o[1],u=Object(c.useState)(!1),b=Object(p.a)(u,2),h=b[0],m=b[1],x=function(){t("/todoList",{replace:!0})};return Object(c.useEffect)((function(){i.setFieldsValue({"\u5355\u636e\u6a21\u677f":P[0][V(0,P[0].length-1)],"\u5ba1\u6279\u6d41":G[0][V(0,G[0].length-1)],"\u62a5\u9500\u4eba":H[V(0,H.length-1)],"\u62a5\u9500\u4e8b\u7531":K[V(0,K.length-1)],"\u62a5\u9500\u91d1\u989d":Q[V(0,Q.length-1)]}),console.log("routeParams",a)}),[]),Object(v.jsxs)("div",{className:"todo-detail",children:[Object(v.jsx)(f.e,{onBack:x,children:"\u5f85\u529e\u8be6\u60c5"}),Object(v.jsx)("div",{className:"todo-detail-content",children:Object(v.jsxs)(f.c,{form:i,footer:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{block:!0,type:"submit",color:"primary",onClick:function(){var e=a.id;d(!0),j.a.post(n.domain+"/biz/update",{userId:n.userId,userName:n.userName,workRecordId:e,flowStatus:"agree"}).then((function(e){d(!1),e&&e.data.success?f.b.alert({content:"\u540c\u610f\u6210\u529f!",onConfirm:function(){x()}}):alert("request failed ---\x3e"+JSON.stringify(e))})).catch((function(e){d(!1),alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))},loading:r,children:"\u540c\u610f"}),Object(v.jsx)(f.a,{block:!0,type:"submit",color:"danger",onClick:function(){var e=a.id;m(!0),j.a.post(n.domain+"/biz/update",{userId:n.userId,userName:n.userName,workRecordId:e,flowStatus:"refuse"}).then((function(e){m(!1),e&&e.data.success?f.b.alert({content:"\u9a73\u56de\u6210\u529f!",onConfirm:function(){x()}}):alert("request failed ---\x3e"+JSON.stringify(e))})).catch((function(e){m(!1),alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))},loading:h,children:"\u9a73\u56de"})]}),children:[Object(v.jsx)(f.c.Item,{className:"row",layout:"horizontal",name:"\u5355\u636e\u6a21\u677f",label:"\u5355\u636e\u6a21\u677f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5355\u636e\u6a21\u677f"}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u62e9\u5355\u636e\u6a21\u677f",disabled:!0,value:P[0][V(0,P[0].length-1)]})}),Object(v.jsx)(f.c.Item,{name:"\u5ba1\u6279\u6d41",label:"\u5ba1\u6279\u6d41",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6279\u6d41"}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6279\u6d41",disabled:!0,value:G[0][V(0,G[0].length-1)]})}),Object(v.jsx)(f.c.Item,{name:"\u62a5\u9500\u4eba",label:"\u62a5\u9500\u4eba",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u62a5\u9500\u4eba"}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u9009\u62e9\u62a5\u9500\u4eba",disabled:!0,value:H[V(0,H.length-1)]})}),Object(v.jsx)(f.c.Item,{name:"\u62a5\u9500\u4e8b\u7531",label:"\u62a5\u9500\u4e8b\u7531",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u62a5\u9500\u4e8b\u7531"}],children:Object(v.jsx)(f.h,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u9500\u4e8b\u7531",disabled:!0,value:K[V(0,K.length-1)]})}),Object(v.jsx)(f.c.Item,{name:"\u62a5\u9500\u91d1\u989d",label:"\u62a5\u9500\u91d1\u989d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u62a5\u9500\u91d1\u989d"}],children:Object(v.jsx)(f.d,{placeholder:"\u8bf7\u8f93\u5165\u62a5\u9500\u91d1\u989d",disabled:!0,value:Q[V(0,Q.length-1)]})})]})})]})};function W(){return Object(v.jsx)(h.a,{children:Object(v.jsxs)(O.c,{children:[Object(v.jsx)(O.a,{path:"/",element:Object(v.jsx)(m,{})}),Object(v.jsx)(O.a,{path:"/home",element:Object(v.jsx)(m,{})}),Object(v.jsx)(O.a,{path:"/bill",element:Object(v.jsx)(C,{})}),Object(v.jsx)(O.a,{path:"/apply",element:Object(v.jsx)(z,{})}),Object(v.jsx)(O.a,{path:"/todoApprove",element:Object(v.jsx)(A,{})}),Object(v.jsx)(O.a,{path:"/todoList",element:Object(v.jsx)(L,{})}),Object(v.jsx)(O.a,{path:"/todoDetail",element:Object(v.jsx)(U,{}),children:Object(v.jsx)(O.a,{path:":id",element:Object(v.jsx)(U,{})})})]})})}var X=l.a.createContext({}),Y=function(e){Object(r.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={domain:"",webDomain:"",corpId:"",authCode:"",userId:"",userName:"\u6613\u5feb\u62a5"},c}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.login()}},{key:"render",value:function(){return""===this.state.userId&&this.login(),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(X.Provider,{value:this.state,children:Object(v.jsx)(W,{})}),this.state.userName&&Object(v.jsxs)("div",{className:"fixName",children:["\u9489\u9489\u7528\u6237: ",this.state.userName]})]})}},{key:"login",value:function(){var e=this;j.a.get(this.state.domain+"/getCorpId").then((function(t){if(t&&200===t.status){var n=t.data;e.setState({corpId:n}),e.loginAction(n)}else alert("login failed ---\x3e"+JSON.stringify(t))})).catch((function(e){alert("corpId err, "+JSON.stringify(e))}))}},{key:"loginAction",value:function(e){var t,n,c=this;null===b||void 0===b||null===(t=b.runtime)||void 0===t||null===(n=t.permission)||void 0===n||n.requestAuthCode({corpId:e,onSuccess:function(e){c.state.authCode=e.code,console.log("---------",e.code),j.a.get(c.state.domain+"/login?authCode="+e.code).then((function(e){if(e&&e.data.success){var t=e.data.data.userId,n=e.data.data.userName;console.log("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d"+n+t),setTimeout((function(){c.setState({userId:t,userName:n})}),0)}else alert("login failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))},onFail:function(e){alert("requestAuthCode failed ---\x3e"+JSON.stringify(e))}}).catch((function(e){console.log(e)}))}}]),n}(l.a.Component),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,544)).then((function(t){var n=t.getCLS,c=t.getFID,l=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),l(e),i(e),a(e)}))};a.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[543,1,2]]]);
//# sourceMappingURL=main.4c145078.chunk.js.map